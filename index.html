<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neumorphic Event Timeline with Graph</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <p>Gary Innerarity, MBA</p>
  <div class="timeline-container">
    <canvas id="background-graph"></canvas> <!-- Background canvas -->
    <div class="timeline" id="timeline"></div>
  </div>

  <script>
    async function loadEvents() {
      const response = await fetch('events.json'); // Load the events
      const events = await response.json(); 

      const timeline = document.getElementById('timeline');
      const graphCanvas = document.getElementById('background-graph');
      const ctx = graphCanvas.getContext('2d');
      
      graphCanvas.width = document.body.clientWidth; 
      graphCanvas.height = 300; // Fixed height for graph
      const graphData = { health: [], certificate: [], project: [] };

      // Populate the graph data and timeline
      events.forEach((event, index) => {
        const { date, title, description, type } = event;

        // Populate graph data
        if (!graphData[type]) graphData[type] = [];
        graphData[type].push({ x: index + 1, y: graphData[type].length + 1 });

        // Create event timeline card
        const eventEl = document.createElement('div');
        eventEl.className = `event ${type}`;
        eventEl.innerHTML = `
          <strong>${date}</strong><br>${title}
          <div class="event-details">${description}</div>
        `;
        timeline.appendChild(eventEl);
      });

      drawGraph(ctx, graphData);
    }

    function drawGraph(ctx, graphData) {
      const colors = { health: '#4CAF50', certificate: '#FF9800', project: '#2196F3' };
      const offsetX = 50;
      const offsetY = 200; // baseline for graph
      ctx.lineWidth = 2;

      Object.keys(graphData).forEach((type) => {
        ctx.strokeStyle = colors[type];
        ctx.beginPath();
        graphData[type].forEach((point, index) => {
          const x = point.x * 100 + offsetX; 
          const y = offsetY - point.y * 20; 
          if (index === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        });
        ctx.stroke();
      });
    }

    loadEvents();
  </script>
</body>
</html>
